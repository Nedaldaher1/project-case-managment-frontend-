import{r as s,n as P,b as R,j as e}from"./index-mz9mZwsC.js";import{u as D,T as E,a as k,b as m,e as n,c as Q,f as j,d as H,h as I,i as z}from"./index-Du1KXNz1.js";const c=20,B=()=>{const[N,C]=s.useState([]),[l,S]=s.useState(0),[w,h]=s.useState(!0),[x,b]=s.useState(null),[v]=P(),g=v.get("type"),[d,p]=s.useState(""),[i,T]=s.useState(""),[r,u]=s.useState(1);s.useEffect(()=>{const a=setTimeout(()=>{T(d)},300);return()=>clearTimeout(a)},[d]),s.useEffect(()=>{u(1)},[i]);const y=s.useCallback(async(a,t)=>{h(!0);try{const o=await R.get("http://localhost:3000/archives/data/all",{params:{type:g,page:a,limit:c,search:t}});o.data.success?(C(o.data.prosecutionData),S(o.data.total)):b("البيانات غير متوفرة")}catch{b("حدث خطأ أثناء جلب البيانات")}finally{h(!1)}},[g]);s.useEffect(()=>{y(r,i)},[r,i,y]);const K=s.useMemo(()=>[{accessorKey:"serialNumber",header:"المسلسل"},{accessorKey:"itemNumber",header:" رقم الاشيا"},{accessorKey:"numberCase",header:"رقم القضية"},{accessorKey:"charge",header:"التهمة"},{accessorKey:"totalNumber",header:"الرقم الكلي"},{accessorKey:"seizureStatement",header:"بيان الحرز"},{accessorKey:"roomNumber",header:"رقم الغرفة"},{accessorKey:"referenceNumber",header:"رقم الستاند"},{accessorKey:"shelfNumber",header:"رقم الرف"},{accessorKey:"prosecutionDetentionDecision",header:" قرار النيابة في الحرز "},{accessorKey:"finalCourtJudgment",header:"حكم المحكمة النهائي"}],[]),f=D({data:N,columns:K,getCoreRowModel:z(),getPaginationRowModel:I(),pageCount:Math.ceil(l/c),manualPagination:!0,state:{pagination:{pageIndex:r-1,pageSize:c}}}),M=()=>{p("")};return w?e.jsx("div",{className:"text-center p-4",children:"جاري تحميل البيانات..."}):x?e.jsx("div",{className:"text-red-500 text-center p-4",children:x}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4 items-center justify-end",children:[e.jsx("input",{type:"text",placeholder:"ابحث برقم القضية أو التهمة...",className:"p-2 border rounded w-64",value:d,onChange:a=>p(a.target.value)}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"مسح التصنيفات"})]}),e.jsx("div",{className:"rounded-lg border shadow overflow-hidden",children:e.jsxs(E,{dir:"rtl",children:[e.jsxs(k,{className:"bg-gray-50",children:[e.jsxs(m,{children:[e.jsx(n,{className:"text-center bg-blue-100 font-bold",colSpan:6,children:"بيانات الحرز"}),e.jsx(n,{className:"text-center bg-green-100 font-bold",colSpan:4,children:"مكان تواجد الحرز"}),e.jsx(n,{className:"text-center bg-yellow-100 font-bold",colSpan:2,children:"التصرف في الحرز"})]}),f.getHeaderGroups().map(a=>e.jsx(m,{children:a.headers.map(t=>e.jsx(Q,{className:"text-center p-3",children:j(t.column.columnDef.header,t.getContext())},t.id))},a.id))]}),e.jsx(H,{children:f.getRowModel().rows.map(a=>e.jsx(m,{className:"hover:bg-gray-50",children:a.getVisibleCells().map(t=>e.jsx(n,{className:"text-center p-2",children:j(t.column.columnDef.cell,t.getContext())},t.id))},a.id))})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-4 mt-4",children:[e.jsx("button",{onClick:()=>u(a=>Math.max(1,a-1)),disabled:r===1,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300",children:"السابق"}),e.jsxs("span",{className:"text-gray-600",children:["الصفحة ",r," من ",Math.ceil(l/c)]}),e.jsx("button",{onClick:()=>u(a=>a+1),disabled:r*c>=l,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300",children:"التالي"})]})]})};export{B as default};
